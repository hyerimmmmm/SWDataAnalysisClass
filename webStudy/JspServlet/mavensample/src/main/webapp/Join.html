<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<form action="JoinController" method="post">
		ID<input type="text" name="id" id="inputId"><br> <span
			id=idCheckMsg>중복확인결과</span> <br> PW<input type="password"
			name="pw"><br> 이름<input type="text" name="name"><br>

		<input type="submit" value="회원가입">
	</form>

	<script src="https://code.jquery.com/jquery-3.7.1.min.js"
		integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
		crossorigin="anonymous"></script>
	<script>
		$('#inputId').on('blur', function() {
			let id = $(this).val().trim();

			$.ajax({
				url : 'IdCheckController',
				type : 'GET',
				data : {
					id : id
				},
				dataType : 'json',
				success : function(data) {
					if (data.available) { //true-사용가능
						$("#idCheckMsg").text("사용가능한 ID입니다");
					} else { // false-중복id
						$("#idCheckMsg").text("중복된 ID입니다");
					}
				}

			})
		})
	</script>
</body>
</html>